<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="LinkSnap - Advanced URL shortening application with custom aliases, QR codes, and analytics">
    <meta name="keywords" content="URL shortener, link shortener, QR code, analytics, custom alias">
    <meta name="author" content="LinkSnap">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="LinkSnap - Advanced URL Shortening">
    <meta property="og:description" content="Create short, memorable links with custom aliases, QR codes, and detailed analytics">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://linksnap.netlify.app">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="LinkSnap - Advanced URL Shortening">
    <meta name="twitter:description" content="Create short, memorable links with custom aliases, QR codes, and detailed analytics">
    
    <title>LinkSnap - Advanced URL Shortening Application</title>
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ”—</text></svg>">
    
    <!-- External Dependencies -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode/1.5.3/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.8.0/Recharts.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- Custom Styles -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .bounce-in {
            animation: bounceIn 0.6s ease-out;
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="root">
        <!-- Loading fallback -->
        <div class="min-h-screen bg-gray-50 flex items-center justify-center">
            <div class="text-center">
                <div class="loading-spinner mx-auto mb-4"></div>
                <p class="text-gray-600">Loading LinkSnap...</p>
            </div>
        </div>
    </div>

    <!-- Main Application Script -->
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, BarChart, Bar } = Recharts;

        function LinkSnap() {
            const [currentView, setCurrentView] = useState('home');
            const [links, setLinks] = useState([]);
            const [isLoading, setIsLoading] = useState(false);
            const [notification, setNotification] = useState('');
            
            // Load saved links on component mount
            useEffect(() => {
                try {
                    const savedLinks = JSON.parse(localStorage.getItem('linksnap-links') || '[]');
                    setLinks(savedLinks);
                } catch (error) {
                    console.error('Error loading saved links:', error);
                    setLinks([]);
                }
            }, []);
            
            // Save links whenever links state changes
            useEffect(() => {
                try {
                    localStorage.setItem('linksnap-links', JSON.stringify(links));
                } catch (error) {
                    console.error('Error saving links:', error);
                }
            }, [links]);

            const showNotification = (message) => {
                setNotification(message);
                setTimeout(() => setNotification(''), 3000);
            };

            const generateShortId = () => {
                return Math.random().toString(36).substr(2, 8);
            };

            const isValidUrl = (string) => {
                try {
                    new URL(string);
                    return true;
                } catch (_) {
                    return false;
                }
            };

            const createShortUrl = (originalUrl, customAlias = '') => {
                setIsLoading(true);
                
                setTimeout(() => {
                    if (!isValidUrl(originalUrl)) {
                        showNotification('Please enter a valid URL');
                        setIsLoading(false);
                        return null;
                    }

                    const shortId = customAlias || generateShortId();
                    const shortUrl = `https://linksnap.io/${shortId}`;
                    
                    // Check if custom alias already exists
                    if (customAlias && links.some(link => link.shortId === customAlias)) {
                        showNotification('Custom alias already exists');
                        setIsLoading(false);
                        return null;
                    }

                    const newLink = {
                        id: Date.now(),
                        originalUrl,
                        shortUrl,
                        shortId,
                        clicks: Math.floor(Math.random() * 100), // Simulated clicks
                        createdAt: new Date().toISOString(),
                        qrCode: null
                    };

                    // Generate QR code
                    QRCode.toDataURL(shortUrl, { width: 200, margin: 2 }, (err, url) => {
                        if (!err) {
                            newLink.qrCode = url;
                        }
                        setLinks(prev => [newLink, ...prev]);
                        setIsLoading(false);
                        showNotification('Link created successfully!');
                    });

                    return newLink;
                }, 1000); // Simulate API delay
            };

            const deleteLink = (id) => {
                setLinks(prev => prev.filter(link => link.id !== id));
                showNotification('Link deleted successfully');
            };

            const copyToClipboard = (text) => {
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(text).then(() => {
                        showNotification('Copied to clipboard!');
                    }).catch(() => {
                        fallbackCopyToClipboard(text);
                    });
                } else {
                    fallbackCopyToClipboard(text);
                }
            };

            const fallbackCopyToClipboard = (text) => {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand('copy');
                    showNotification('Copied to clipboard!');
                } catch (err) {
                    showNotification('Failed to copy to clipboard');
                }
                document.body.removeChild(textArea);
            };

            return (
                <div className="min-h-screen bg-gray-50">
                    {/* Navigation */}
                    <nav className="gradient-bg text-white shadow-lg">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div className="flex justify-between items-center h-16">
                                <div className="flex items-center space-x-2">
                                    <i className="fas fa-link text-2xl"></i>
                                    <span className="text-xl font-bold">LinkSnap</span>
                                </div>
                                <div className="flex space-x-4">
                                    <button 
                                        onClick={() => setCurrentView('home')}
                                        className={`px-4 py-2 rounded-lg transition-all ${currentView === 'home' ? 'bg-white bg-opacity-20' : 'hover:bg-white hover:bg-opacity-10'}`}
                                    >
                                        <i className="fas fa-home mr-2"></i>
                                        Home
                                    </button>
                                    <button 
                                        onClick={() => setCurrentView('analytics')}
                                        className={`px-4 py-2 rounded-lg transition-all ${currentView === 'analytics' ? 'bg-white bg-opacity-20' : 'hover:bg-white hover:bg-opacity-10'}`}
                                    >
                                        <i className="fas fa-chart-line mr-2"></i>
                                        Analytics
                                    </button>
                                    <button 
                                        onClick={() => setCurrentView('links')}
                                        className={`px-4 py-2 rounded-lg transition-all ${currentView === 'links' ? 'bg-white bg-opacity-20' : 'hover:bg-white hover:bg-opacity-10'}`}
                                    >
                                        <i className="fas fa-list mr-2"></i>
                                        My Links ({links.length})
                                    </button>
                                </div>
                            </div>
                        </div>
                    </nav>

                    {/* Notification */}
                    {notification && (
                        <div className="fixed top-20 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 bounce-in">
                            <div className="flex items-center">
                                <i className="fas fa-check-circle mr-2"></i>
                                {notification}
                            </div>
                        </div>
                    )}

                    {/* Main Content */}
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        {currentView === 'home' && <HomeView createShortUrl={createShortUrl} isLoading={isLoading} />}
                        {currentView === 'analytics' && <AnalyticsView links={links} />}
                        {currentView === 'links' && <LinksView links={links} deleteLink={deleteLink} copyToClipboard={copyToClipboard} />}
                    </div>

                    {/* Footer */}
                    <footer className="bg-gray-800 text-white py-8 mt-16">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                            <div className="flex items-center justify-center space-x-2 mb-4">
                                <i className="fas fa-link text-xl"></i>
                                <span className="text-xl font-bold">LinkSnap</span>
                            </div>
                            <p className="text-gray-400">Advanced URL shortening with style and analytics</p>
                            <div className="mt-4 flex justify-center space-x-6">
                                <a href="#" className="text-gray-400 hover:text-white transition-colors">
                                    <i className="fab fa-github"></i>
                                </a>
                                <a href="#" className="text-gray-400 hover:text-white transition-colors">
                                    <i className="fab fa-twitter"></i>
                                </a>
                                <a href="#" className="text-gray-400 hover:text-white transition-colors">
                                    <i className="fas fa-envelope"></i>
                                </a>
                            </div>
                        </div>
                    </footer>
                </div>
            );
        }

        function HomeView({ createShortUrl, isLoading }) {
            const [url, setUrl] = useState('');
            const [customAlias, setCustomAlias] = useState('');
            const [recentLink, setRecentLink] = useState(null);

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!url.trim()) {
                    return;
                }
                
                const newLink = createShortUrl(url.trim(), customAlias.trim());
                if (newLink || isLoading) {
                    // Clear form only if creation started successfully
                    setTimeout(() => {
                        setUrl('');
                        setCustomAlias('');
                    }, 100);
                }
            };

            return (
                <div className="space-y-8">
                    {/* Hero Section */}
                    <div className="text-center py-12">
                        <h1 className="text-5xl font-bold text-gray-800 mb-4">
                            Shorten Your URLs with <span className="text-purple-600">Style</span>
                        </h1>
                        <p className="text-xl text-gray-600 mb-8 max-w-2xl mx-auto">
                            Create short, memorable links with custom aliases, QR codes, and detailed analytics. 
                            Perfect for social media, marketing campaigns, and professional use.
                        </p>
                    </div>

                    {/* URL Shortener Form */}
                    <div className="max-w-4xl mx-auto">
                        <div className="bg-white rounded-2xl shadow-xl p-8 card-hover">
                            <form onSubmit={handleSubmit} className="space-y-6">
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                        <i className="fas fa-link mr-2"></i>
                                        Enter your long URL
                                    </label>
                                    <input
                                        type="url"
                                        value={url}
                                        onChange={(e) => setUrl(e.target.value)}
                                        placeholder="https://example.com/very-long-url-that-needs-shortening"
                                        className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
                                        required
                                        disabled={isLoading}
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                        <i className="fas fa-edit mr-2"></i>
                                        Custom alias (optional)
                                    </label>
                                    <div className="flex items-center space-x-2">
                                        <span className="text-gray-500 bg-gray-100 px-3 py-3 rounded-lg border">linksnap.io/</span>
                                        <input
                                            type="text"
                                            value={customAlias}
                                            onChange={(e) => setCustomAlias(e.target.value.replace(/[^a-zA-Z0-9-_]/g, ''))}
                                            placeholder="my-custom-link"
                                            className="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
                                            disabled={isLoading}
                                        />
                                    </div>
                                    <p className="text-xs text-gray-500 mt-1">Only letters, numbers, hyphens, and underscores allowed</p>
                                </div>

                                <button
                                    type="submit"
                                    disabled={isLoading || !url.trim()}
                                    className="w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 px-6 rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all duration-300 font-medium text-lg shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:transform-none disabled:cursor-not-allowed"
                                >
                                    {isLoading ? (
                                        <span className="flex items-center justify-center">
                                            <div className="loading-spinner mr-2" style={{width: '20px', height: '20px', borderWidth: '2px'}}></div>
                                            Creating Link...
                                        </span>
                                    ) : (
                                        <span className="flex items-center justify-center">
                                            <i className="fas fa-magic mr-2"></i>
                                            Shorten URL
                                        </span>
                                    )}
                                </button>
                            </form>
                        </div>
                    </div>

                    {/* Features Section */}
                    <div className="grid md:grid-cols-3 gap-8 mt-16">
                        <div className="text-center p-6 bg-white rounded-xl shadow-lg card-hover">
                            <div className="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i className="fas fa-qrcode text-2xl text-purple-600"></i>
                            </div>
                            <h3 className="text-xl font-semibold mb-2">QR Code Generation</h3>
                            <p className="text-gray-600">Automatically generate QR codes for your shortened URLs for easy mobile sharing and quick access.</p>
                        </div>
                        
                        <div className="text-center p-6 bg-white rounded-xl shadow-lg card-hover">
                            <div className="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i className="fas fa-chart-line text-2xl text-blue-600"></i>
                            </div>
                            <h3 className="text-xl font-semibold mb-2">Analytics Dashboard</h3>
                            <p className="text-gray-600">Track clicks, performance metrics, and detailed analytics for all your shortened links in real-time.</p>
                        </div>
                        
                        <div className="text-center p-6 bg-white rounded-xl shadow-lg card-hover">
                            <div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i className="fas fa-edit text-2xl text-green-600"></i>
                            </div>
                            <h3 className="text-xl font-semibold mb-2">Custom Aliases</h3>
                            <p className="text-gray-600">Create memorable, branded short URLs with custom aliases for better brand recognition and trust.</p>
                        </div>
                    </div>

                    {/* Statistics Section */}
                    <div className="bg-gradient-to-r from-purple-600 to-blue-600 rounded-2xl p-8 text-white mt-16">
                        <div className="text-center mb-8">
                            <h2 className="text-3xl font-bold mb-4">Trusted by Thousands</h2>
                            <p className="text-purple-100">Join the growing community of LinkSnap users</p>
                        </div>
                        <div className="grid md:grid-cols-4 gap-8">
                            <div className="text-center">
                                <div className="text-3xl font-bold mb-2">10K+</div>
                                <div className="text-purple-100">Links Created</div>
                            </div>
                            <div className="text-center">
                                <div className="text-3xl font-bold mb-2">50K+</div>
                                <div className="text-purple-100">Total Clicks</div>
                            </div>
                            <div className="text-center">
                                <div className="text-3xl font-bold mb-2">1K+</div>
                                <div className="text-purple-100">Active Users</div>
                            </div>
                            <div className="text-center">
                                <div className="text-3xl font-bold mb-2">99.9%</div>
                                <div className="text-purple-100">Uptime</div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        function AnalyticsView({ links }) {
            const totalClicks = links.reduce((sum, link) => sum + link.clicks, 0);
            const totalLinks = links.length;
            const avgClicks = totalLinks > 0 ? Math.round(totalClicks / totalLinks) : 0;

            // Sample data for charts with more realistic patterns
            const clickData = [
                { name: 'Mon', clicks: Math.floor(Math.random() * 100) + 50 },
                { name: 'Tue', clicks: Math.floor(Math.random() * 150) + 75 },
                { name: 'Wed', clicks: Math.floor(Math.random() * 200) + 100 },
                { name: 'Thu', clicks: Math.floor(Math.random() * 180) + 90 },
                { name: 'Fri', clicks: Math.floor(Math.random() * 160) + 80 },
                { name: 'Sat', clicks: Math.floor(Math.random() * 140) + 70 },
                { name: 'Sun', clicks: Math.floor(Math.random() * 120) + 60 }
            ];

            const topLinks = links
                .sort((a, b) => b.clicks - a.clicks)
                .slice(0, 5);

            const deviceData = [
                { name: 'Desktop', value: 45 },
                { name: 'Mobile', value: 35 },
                { name: 'Tablet', value: 20 }
            ];

            return (
                <div className="space-y-8">
                    <div className="text-center">
                        <h1 className="text-4xl font-bold text-gray-800 mb-2">Analytics Dashboard</h1>
                        <p className="text-gray-600">Track the performance and insights of your shortened URLs</p>
                    </div>

                    {totalLinks === 0 ? (
                        <div className="text-center py-12">
                            <div className="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i className="fas fa-chart-line text-3xl text-gray-400"></i>
                            </div>
                            <h3 className="text-xl font-semibold text-gray-800 mb-2">No Analytics Data Yet</h3>
                            <p className="text-gray-600 mb-4">Create some shortened URLs to start seeing analytics</p>
                            <button 
                                onClick={() => setCurrentView('home')}
                                className="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors"
                            >
                                Create Your First Link
                            </button>
                        </div>
                    ) : (
                        <>
                            {/* Stats Cards */}
                            <div className="grid md:grid-cols-4 gap-6">
                                <div className="bg-white rounded-xl p-6 shadow-lg card-hover">
                                    <div className="flex items-center justify-between">
                                        <div>
                                            <p className="text-gray-500 text-sm">Total Clicks</p>
                                            <p className="text-3xl font-bold text-blue-600">{totalClicks.toLocaleString()}</p>
                                            <p className="text-green-500 text-xs mt-1">
                                                <i className="fas fa-arrow-up mr-1"></i>
                                                +12% from last week
                                            </p>
                                        </div>
                                        <div className="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                                            <i className="fas fa-mouse-pointer text-blue-600"></i>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="bg-white rounded-xl p-6 shadow-lg card-hover">
                                    <div className="flex items-center justify-between">
                                        <div>
                                            <p className="text-gray-500 text-sm">Total Links</p>
                                            <p className="text-3xl font-bold text-green-600">{totalLinks}</p>
                                            <p className="text-green-500 text-xs mt-1">
                                                <i className="fas fa-arrow-up mr-1"></i>
                                                +{totalLinks} this month
                                            </p>
                                        </div>
                                        <div className="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                                            <i className="fas fa-link text-green-600"></i>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="bg-white rounded-xl p-6 shadow-lg card-hover">
                                    <div className="flex items-center justify-between">
                                        <div>
                                            <p className="text-gray-500 text-sm">Avg. Clicks</p>
                                            <p className="text-3xl font-bold text-purple-600">{avgClicks}</p>
                                            <p className="text-blue-500 text-xs mt-1">
                                                <i className="fas fa-chart-line mr-1"></i>
                                                Per link
                                            </p>
                                        </div>
                                        <div className="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center">
                                            <i className="fas fa-chart-bar text-purple-600"></i>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-white rounded-xl p-6 shadow-lg card-hover">
                                    <div className="flex items-center justify-between">
                                        <div>
                                            <p className="text-gray-500 text-sm">Top Performer</p>
                                            <p className="text-3xl font-bold text-orange-600">
                                                {topLinks.length > 0 ? topLinks[0].clicks : 0}
                                            </p>
                                            <p className="text-orange-500 text-xs mt-1">
                                                <i className="fas fa-trophy mr-1"></i>
                                                Best link
                                            </p>
                                        </div>
                                        <div className="w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center">
                                            <i className="fas fa-crown text-orange-600"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Charts */}
                            <div className="grid lg:grid-cols-2 gap-8">
                                <div className="bg-white rounded-xl p-6 shadow-lg">
                                    <h3 className="text-xl font-semibold mb-4 flex items-center">
                                        <i className="fas fa-chart-line mr-2 text-blue-600"></i>
                                        Weekly Click Trends
                                    </h3>
                                    <ResponsiveContainer width="100%" height={300}>
                                        <LineChart data={clickData}>
                                            <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
                                            <XAxis dataKey="name" stroke="#666" />
                                            <YAxis stroke="#666" />
                                            <Tooltip 
                                                contentStyle={{
                                                    backgroundColor: '#fff',
                                                    border: '1px solid #ddd',
                                                    borderRadius: '8px',
                                                    boxShadow: '0 4px 12px rgba(0,0,0,0.1)'
                                                }}
                                            />
                                            <Line 
                                                type="monotone" 
                                                dataKey="clicks" 
                                                stroke="#8b5cf6" 
                                                strokeWidth={3}
                                                dot={{ fill: '#8b5cf6', strokeWidth: 2, r: 6 }}
                                                activeDot={{ r: 8, stroke: '#8b5cf6', strokeWidth: 2 }}
                                            />
                                        </LineChart>
                                    </ResponsiveContainer>
                                </div>

                                <div className="bg-white rounded-xl p-6 shadow-lg">
                                    <h3 className="text-xl font-semibold mb-4 flex items-center">
                                        <i className="fas fa-chart-bar mr-2 text-green-600"></i>
                                        Top Performing Links
                                    </h3>
                                    <ResponsiveContainer width="100%" height={300}>
                                        <BarChart data={topLinks.map(link => ({ 
                                            name: link.shortId.length > 8 ? link.shortId.substring(0, 8) + '...' : link.shortId, 
                                            clicks: link.clicks 
                                        }))}>
                                            <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
                                            <XAxis dataKey="name" stroke="#666" />
                                            <YAxis stroke="#666" />
                                            <Tooltip 
                                                contentStyle={{
                                                    backgroundColor: '#fff',
                                                    border: '1px solid #ddd',
                                                    borderRadius: '8px',
                                                    boxShadow: '0 4px 12px rgba(0,0,0,0.1)'
                                                }}
                                            />
                                            <Bar dataKey="clicks" fill="#3b82f6" radius={[4, 4, 0, 0]} />
                                        </BarChart>
                                    </ResponsiveContainer>
                                </div>
                            </div>

                            {/* Detailed Analytics Table */}
                            <div className="bg-white rounded-xl shadow-lg overflow-hidden">
                                <div className="p-6 border-b border-gray-200">
                                    <h3 className="text-xl font-semibold flex items-center">
                                        <i className="fas fa-table mr-2 text-purple-600"></i>
                                        Link Performance Details
                                    </h3>
                                </div>
                                <div className="overflow-x-auto">
                                    <table className="w-full">
                                        <thead className="bg-gray-50">
                                            <tr>
                                                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Short URL</th>
                                                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Original URL</th>
                                                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Clicks</th>
                                                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Created</th>
                                                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Performance</th>
                                            </tr>
                                        </thead>
                                        <tbody className="bg-white divide-y divide-gray-200">
                                            {topLinks.map((link, index) => (
                                                <tr key={link.id} className="hover:bg-gray-50 transition-colors">
                                                    <td className="px-6 py-4 whitespace-nowrap">
                                                        <div className="flex items-center">
                                                            <span className="text-sm font-medium text-blue-600">{link.shortUrl}</span>
                                                            {index === 0 && <i className="fas fa-crown text-yellow-500 ml-2" title="Top performer"></i>}
                                                        </div>
                                                    </td>
                                                    <td className="px-6 py-4">
                                                        <div className="text-sm text-gray-900 truncate max-w-xs" title={link.originalUrl}>
                                                            {link.originalUrl}
                                                        </div>
                                                    </td>
                                                    <td className="px-6 py-4 whitespace-nowrap">
                                                        <div className="text-sm font-semibold text-gray-900">{link.clicks}</div>
                                                    </td>
                                                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                        {new Date(link.createdAt).toLocaleDateString()}
                                                    </td>
                                                    <td className="px-6 py-4 whitespace-nowrap">
                                                        <div className="flex items-center">
                                                            <div className="flex-1 bg-gray-200 rounded-full h-2 mr-2">
                                                                <div 
                                                                    className="bg-gradient-to-r from-green-400 to-blue-500 h-2 rounded-full" 
                                                                    style={{ width: `${Math.min((link.clicks / Math.max(...topLinks.map(l => l.clicks))) * 100, 100)}%` }}
                                                                ></div>
                                                            </div>
                                                            <span className="text-xs text-gray-500">
                                                                {Math.round((link.clicks / totalClicks) * 100)}%
                                                            </span>
                                                        </div>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </>
                    )}
                </div>
            );
        }

        function LinksView({ links, deleteLink, copyToClipboard }) {
            const [searchTerm, setSearchTerm] = useState('');
            const [sortBy, setSortBy] = useState('newest');

            const filteredLinks = links
                .filter(link => 
                    link.originalUrl.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    link.shortId.toLowerCase().includes(searchTerm.toLowerCase())
                )
                .sort((a, b) => {
                    switch (sortBy) {
                        case 'newest':
                            return new Date(b.createdAt) - new Date(a.createdAt);
                        case 'oldest':
                            return new Date(a.createdAt) - new Date(b.createdAt);
                        case 'clicks':
                            return b.clicks - a.clicks;
                        case 'alphabetical':
                            return a.shortId.localeCompare(b.shortId);
                        default:
                            return 0;
                    }
                });

            const downloadQRCode = (qrCode, shortId) => {
                const link = document.createElement('a');
                link.download = `qr-${shortId}.png`;
                link.href = qrCode;
                link.click();
            };

            return (
                <div className="space-y-8">
                    <div className="text-center">
                        <h1 className="text-4xl font-bold text-gray-800 mb-2">My Links</h1>
                        <p className="text-gray-600">Manage and track all your shortened URLs in one place</p>
                    </div>

                    {/* Search and Filter */}
                    <div className="flex flex-col md:flex-row gap-4 justify-between items-center bg-white p-6 rounded-xl shadow-lg">
                        <div className="relative flex-1 max-w-md">
                            <i className="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input
                                type="text"
                                placeholder="Search by URL or alias..."
                                value={searchTerm}
                                onChange={(e) => setSearchTerm(e.target.value)}
                                className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
                            />
                        </div>
                        <div className="flex items-center space-x-4">
                            <select
                                value={sortBy}
                                onChange={(e) => setSortBy(e.target.value)}
                                className="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
                            >
                                <option value="newest">Newest First</option>
                                <option value="oldest">Oldest First</option>
                                <option value="clicks">Most Clicks</option>
                                <option value="alphabetical">Alphabetical</option>
                            </select>
                            <div className="text-sm text-gray-500">
                                {filteredLinks.length} of {links.length} links
                            </div>
                        </div>
                    </div>

                    {/* Links Grid */}
                    {filteredLinks.length === 0 ? (
                        <div className="text-center py-12">
                            <div className="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i className="fas fa-link text-3xl text-gray-400"></i>
                            </div>
                            <h3 className="text-xl font-semibold text-gray-800 mb-2">
                                {searchTerm ? 'No links found' : 'No links yet'}
                            </h3>
                            <p className="text-gray-600 mb-4">
                                {searchTerm ? 'Try adjusting your search term or filters' : 'Create your first shortened URL to get started'}
                            </p>
                            {!searchTerm && (
                                <button 
                                    onClick={() => setCurrentView('home')}
                                    className="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors"
                                >
                                    Create Your First Link
                                </button>
                            )}
                        </div>
                    ) : (
                        <div className="grid gap-6">
                            {filteredLinks.map(link => (
                                <div key={link.id} className="bg-white rounded-xl shadow-lg p-6 card-hover border-l-4 border-purple-500">
                                    <div className="flex flex-col lg:flex-row lg:items-center gap-6">
                                        <div className="flex-1 space-y-4">
                                            <div className="flex items-start justify-between">
                                                <div className="flex-1">
                                                    <label className="text-sm font-medium text-gray-500 flex items-center">
                                                        <i className="fas fa-link mr-1"></i>
                                                        Short URL
                                                    </label>
                                                    <div className="flex items-center space-x-2 mt-1">
                                                        <code className="bg-blue-50 text-blue-700 px-3 py-2 rounded-lg text-sm font-mono flex-1">
                                                            {link.shortUrl}
                                                        </code>
                                                        <button
                                                            onClick={() => copyToClipboard(link.shortUrl)}
                                                            className="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"
                                                            title="Copy short URL"
                                                        >
                                                            <i className="fas fa-copy"></i>
                                                        </button>
                                                        <a 
                                                            href={link.originalUrl} 
                                                            target="_blank" 
                                                            rel="noopener noreferrer"
                                                            className="p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors"
                                                            title="Visit original URL"
                                                        >
                                                            <i className="fas fa-external-link-alt"></i>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div>
                                                <label className="text-sm font-medium text-gray-500 flex items-center">
                                                    <i className="fas fa-globe mr-1"></i>
                                                    Original URL
                                                </label>
                                                <p className="text-gray-900 mt-1 break-all">{link.originalUrl}</p>
                                            </div>
                                            
                                            <div className="flex items-center space-x-6 text-sm">
                                                <span className="flex items-center text-blue-600 bg-blue-50 px-3 py-1 rounded-full">
                                                    <i className="fas fa-mouse-pointer mr-2"></i>
                                                    {link.clicks} clicks
                                                </span>
                                                <span className="flex items-center text-green-600 bg-green-50 px-3 py-1 rounded-full">
                                                    <i className="fas fa-calendar mr-2"></i>
                                                    {new Date(link.createdAt).toLocaleDateString()}
                                                </span>
                                                <span className="flex items-center text-purple-600 bg-purple-50 px-3 py-1 rounded-full">
                                                    <i className="fas fa-hashtag mr-2"></i>
                                                    {link.shortId}
                                                </span>
                                            </div>
                                        </div>
                                        
                                        <div className="flex items-center space-x-4">
                                            {link.qrCode && (
                                                <div className="text-center">
                                                    <img 
                                                        src={link.qrCode} 
                                                        alt="QR Code" 
                                                        className="w-20 h-20 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer"
                                                        title="Click to download QR code"
                                                        onClick={() => downloadQRCode(link.qrCode, link.shortId)}
                                                    />
                                                    <p className="text-xs text-gray-500 mt-1">QR Code</p>
                                                </div>
                                            )}
                                            
                                            <div className="flex flex-col space-y-2">
                                                <button
                                                    onClick={() => copyToClipboard(link.shortUrl)}
                                                    className="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium shadow-md hover:shadow-lg transform hover:scale-105"
                                                    title="Copy short URL"
                                                >
                                                    <i className="fas fa-copy mr-2"></i>
                                                    Copy Link
                                                </button>
                                                {link.qrCode && (
                                                    <button
                                                        onClick={() => downloadQRCode(link.qrCode, link.shortId)}
                                                        className="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm font-medium shadow-md hover:shadow-lg transform hover:scale-105"
                                                        title="Download QR code"
                                                    >
                                                        <i className="fas fa-download mr-2"></i>
                                                        QR Code
                                                    </button>
                                                )}
                                                <button
                                                    onClick={() => {
                                                        if (window.confirm('Are you sure you want to delete this link?')) {
                                                            deleteLink(link.id);
                                                        }
                                                    }}
                                                    className="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium shadow-md hover:shadow-lg transform hover:scale-105"
                                                    title="Delete link"
                                                >
                                                    <i className="fas fa-trash mr-2"></i>
                                                    Delete
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        }

        // Initialize the application
        ReactDOM.render(<LinkSnap />, document.getElementById('root'));
    </script>
</body>
</html>
